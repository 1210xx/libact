language: python
python:
  - "3.3"
  - "3.4"
  - "3.5"
  - "nightly"
os:
  - linux
  - osx
sudo: required
dist: trusty
matrix:
  allow_failures:
    - os: osx           # Python 3 not supported in Travis OSX environment
    - python: "nightly" # SciPy bug

virtualenv:
  system_site_packages: true

before_install:
  - if [ "$TRAVIS_OS_NAME" = "osx" ]; then
      brew update;
      brew tap homebrew/science;
      brew install openblas;
    else
      sudo apt-get update -qq;
      sudo apt-get install -y build-essential gfortran libatlas-base-dev liblapacke-dev;
      sudo apt-get install -y python3-dev python3-numpy python3-scipy python3-matplotlib;
    fi
  - python -V
  - pip install scikit-learn Cython
install:
  - ./setup.py build_ext --inplace
script:
  - python -m unittest -v
